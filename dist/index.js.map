{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AAIA;;;;;;;;;;;;IAEqB,K;;;AAEnB,iBAAY,KAAZ,EAAkB;AAAA;;AAAA,yFACV,KADU;;AAGhB,UAAK,SAAL,GAAiB,MAAK,SAAL,CAAe,IAAf,OAAjB;AAHgB;AAIjB;;;;gCAEW;AACV,WAAK,MAAL,GAAc,IAAI,KAAK,OAAT,GACX,EADW,CACR,KAAK,SADG,EAEX,SAFW,CAED,KAAK,KAAL,CAAW,SAFV,EAGX,KAHW,CAGL,KAAK,KAAL,CAAW,KAHN,EAIX,OAJW,CAIH,KAAK,KAAL,CAAW,OAJR,EAKX,MALW,CAKJ,KAAK,KAAL,CAAW,MALP,EAMX,KANW,CAML,KAAK,KAAL,CAAW,KANN,EAOX,MAPW,CAOJ,KAAK,KAAL,CAAW,MAPP,EAQX,YARW,CAQE,KAAK,KAAL,CAAW,YARb,EASX,YATW,CASE,KAAK,KAAL,CAAW,YATb,EAUX,OAVW,EAAd;AAWD;;;wCACkB;AAAA;;AACjB,WAAK,SAAL;AACA,WAAK,KAAL,CAAW,MAAX,CAAkB,GAAlB,CAAsB,KAAK,KAAL,CAAW,KAAjC,EAAwC,UAAC,GAAD,EAAM,GAAN,EAAc;AACpD,YAAI,GAAJ,EAAS;AACP;AACA,iBAAK,MAAL,CAAY,KAAZ,CAAkB,IAAI,OAAtB;AACD,SAHD,MAIK;AACH,cAAM,cAAc,OAAK,KAAL,CAAW,cAA/B;AACA,cAAI,OAAO,IAAI,MAAf;;AAEA;AACA,cAAI,WAAJ,EAAiB;AACf,mBAAO,YAAY,IAAZ,CAAP;AACD;;AAED,iBAAK,MAAL,CACG,YADH,CACgB,EAAE,QAAQ,IAAV,EADhB,EAEG,YAFH,CAEgB,OAAK,KAAL,CAAW,YAF3B,EAGG,MAHH,CAGU,OAAK,KAAL,CAAW,MAHrB,EAIG,MAJH;AAKD;AACF,OApBD;AAqBD;;;6BAEO;AAAA;;AACN,aAAO,uCAAK,KAAK,aAAC,CAAD;AAAA,iBAAO,OAAK,SAAL,GAAiB,CAAxB;AAAA,SAAV,GAAP;AACD;;;;EAhDgC,gBAAM,S;;kBAApB,K;;;AAoDrB,MAAM,SAAN,GAAkB;AAChB,UAAQ,gBAAM,SAAN,CAAgB,MAAhB,CAAuB,UADf;AAEhB,SAAO,gBAAM,SAAN,CAAgB,MAAhB,CAAuB,UAFd;AAGhB,aAAW,gBAAM,SAAN,CAAgB,MAAhB,CAAuB,UAHlB;AAIhB,SAAO,gBAAM,SAAN,CAAgB,MAJP;AAKhB,WAAS,gBAAM,SAAN,CAAgB,MALT;AAMhB,UAAQ,gBAAM,SAAN,CAAgB,MANR;AAOhB,SAAO,gBAAM,SAAN,CAAgB,MAPP;AAQhB,UAAQ,gBAAM,SAAN,CAAgB,KARR;AAShB,gBAAc,gBAAM,SAAN,CAAgB,MATd;AAUhB,gBAAc,gBAAM,SAAN,CAAgB,MAVd;AAWhB,UAAQ,gBAAM,SAAN,CAAgB,KAXR;AAYhB,gBAAc,gBAAM,SAAN,CAAgB,MAZd;AAahB,kBAAgB,gBAAM,SAAN,CAAgB;AAbhB,CAAlB;;AAgBA,MAAM,YAAN,GAAqB;AACnB,SAAO,EADY;AAEnB,WAAS,EAFU;AAGnB,UAAQ,GAHW;AAInB,SAAO,GAJY;AAKnB,UAAQ,EALW;AAMnB,gBAAc,EANK;AAOnB,gBAAc,EAPK;AAQnB,UAAQ,EARW;AASnB,gBAAc;AATK,CAArB","file":"index.js","sourcesContent":["import React, {\n  Component\n} from \"react\";\n\nimport keen from \"keen-js\";\n\nexport default class Chart extends React.Component {\n\n  constructor(props){\n    super(props);\n\n    this.initChart = this.initChart.bind(this);\n  }\n\n  initChart() {\n    this._chart = new Keen.Dataviz()\n      .el(this._chartRef)\n      .chartType(this.props.chartType)\n      .title(this.props.title)\n      .library(this.props.library)\n      .height(this.props.height)\n      .width(this.props.width)\n      .colors(this.props.colors)\n      .colorMapping(this.props.colorMapping)\n      .chartOptions(this.props.chartOptions)\n      .prepare();\n  }\n  componentDidMount(){\n    this.initChart();\n    this.props.client.run(this.props.query, (err, res) => {\n      if (err) {\n        // Display the API error\n        this._chart.error(err.message);\n      }\n      else {\n        const customParse = this.props.customFunction;\n        let data = res.result;\n\n        // Handle the response\n        if (customParse) {\n          data = customParse(data);\n        }\n\n        this._chart\n          .parseRawData({ result: data })\n          .labelMapping(this.props.labelMapping)\n          .labels(this.props.labels)\n          .render();\n      }\n    });\n  }\n\n  render(){\n    return(<div ref={(c) => this._chartRef = c}></div>);\n  }\n\n}\n\nChart.propTypes = {\n  client: React.PropTypes.object.isRequired,\n  query: React.PropTypes.object.isRequired,\n  chartType: React.PropTypes.string.isRequired,\n  title: React.PropTypes.string,\n  library: React.PropTypes.string,\n  height: React.PropTypes.number,\n  width: React.PropTypes.number,\n  colors: React.PropTypes.array,\n  colorMapping: React.PropTypes.object,\n  labelMapping: React.PropTypes.object,\n  labels: React.PropTypes.array,\n  chartOptions: React.PropTypes.object,\n  customFunction: React.PropTypes.func,\n};\n\nChart.defaultProps = {\n  title: \"\",\n  library: \"\",\n  height: 400,\n  width: 600,\n  colors: [],\n  colorMapping: {},\n  labelMapping: {},\n  labels: [],\n  chartOptions: {},\n};\n"]}